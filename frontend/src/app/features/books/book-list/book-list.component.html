<div class="book-list">
  <div class="page-header">
    <div class="page-title-wrap">
      <h2>üìö Browse Catalog</h2>
      <p class="page-desc">Find your next great read</p>
    </div>
    <div class="search-bar">
      <input
        type="text"
        placeholder="Search by title or author..."
        [(ngModel)]="search"
        (keyup.enter)="onSearch()"
      />
      <button type="button" (click)="onSearch()">Search</button>
    </div>
  </div>
  @if (loading) {
    <div class="loading-state">
      <span class="loading-spinner"></span>
      <p>Loading books...</p>
    </div>
  } @else if (loadError) {
    <div class="empty-state error-state">
      <span class="empty-icon">‚ö†Ô∏è</span>
      <p>{{ loadError }}</p>
      <p class="empty-hint">Start the backend with: <code>cd backend && go run .</code></p>
    </div>
  } @else if (books.length === 0) {
    <div class="empty-state">
      <span class="empty-icon">üì≠</span>
      <p>No books found.</p>
      <p class="empty-hint">
        Go to the <a routerLink="/login">login page</a> and click &quot;Load demo data&quot; to add books, or try a different search.
      </p>
    </div>
  } @else {
    <div class="books-grid">
      @for (book of books; track book.id) {
        <a [routerLink]="['/main/books', book.id]" class="book-card">
          <span class="book-badge" [class.available]="book.available_copies > 0" [class.unavailable]="book.available_copies === 0">
            {{ book.available_copies > 0 ? book.available_copies + ' available' : 'Out of stock' }}
          </span>
          <h3 class="book-title">{{ book.title }}</h3>
          <p class="book-author">{{ book.author }}</p>
          @if (book.genre) {
            <p class="book-genre">{{ book.genre }}</p>
          }
        </a>
      }
    </div>
  }
</div>
