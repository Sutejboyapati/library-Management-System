import{a as S,b as v,c as k,d as E,e as R,f as z,j as W}from"./chunk-OOQXQIKY.js";import{a as O}from"./chunk-CDMB5YBM.js";import{A as u,B as C,F as _,I as l,K as f,N as t,O as n,P as M,R as w,S as h,T as i,U as b,V as P,X as g,Y as m,Z as c,qa as x,ra as y,y as s}from"./chunk-OW66QSYT.js";function D(a,T){if(a&1&&(t(0,"p",13),i(1),n()),a&2){let r=h();s(),b(r.error)}}function L(a,T){if(a&1&&(t(0,"p",14),i(1),n()),a&2){let r=h();s(),b(r.success)}}var G=(()=>{class a{constructor(r,d){this.auth=r,this.router=d,this.username="",this.password="",this.confirmPassword="",this.loading=!1,this.error="",this.success=""}onSubmit(){if(this.error="",this.success="",!this.username.trim()){this.error="Please enter a username.";return}if(!this.password){this.error="Please enter a password.";return}if(this.password!==this.confirmPassword){this.error="Passwords do not match.";return}this.loading=!0,this.auth.register({username:this.username.trim(),password:this.password,role:"user"}).subscribe({next:()=>{this.success="Account created. Redirecting to login...",setTimeout(()=>this.router.navigate(["/login"]),1500)},error:r=>{this.loading=!1,r?.status===0||r?.message?.includes("Unknown Error")?this.error="Cannot reach the server. Please start the backend (e.g. run the Go server on port 3000) and try again.":this.error=r?.error?.message??r?.message??"Registration failed."},complete:()=>this.loading=!1})}static{this.\u0275fac=function(d){return new(d||a)(u(O),u(x))}}static{this.\u0275cmp=C({type:a,selectors:[["app-register"]],decls:28,vars:10,consts:[[1,"register-page"],[1,"register-bg-pattern"],[1,"register-container"],[1,"register-header"],[1,"register-icon"],[1,"subtitle"],[1,"register-form",3,"ngSubmit"],["for","username"],["id","username","type","text","placeholder","Username","name","username",3,"ngModelChange","ngModel","disabled"],["for","password"],["id","password","type","password","placeholder","Create a password","name","password",3,"ngModelChange","ngModel","disabled"],["for","confirm"],["id","confirm","type","password","placeholder","Confirm password","name","confirmPassword",3,"ngModelChange","ngModel","disabled"],[1,"error-message"],[1,"success-message"],["type","submit",3,"disabled"],[1,"login-link"],["routerLink","/login"]],template:function(d,e){d&1&&(t(0,"div",0),M(1,"div",1),t(2,"div",2)(3,"div",3)(4,"span",4),i(5,"\u{1F4DA}"),n(),t(6,"h1"),i(7,"Create your account"),n()(),t(8,"p",5),i(9,"Join Gator Shelfguide for a seamless library experience."),n(),t(10,"form",6),w("ngSubmit",function(){return e.onSubmit()}),t(11,"label",7),i(12,"Username"),n(),t(13,"input",8),c("ngModelChange",function(o){return m(e.username,o)||(e.username=o),o}),n(),t(14,"label",9),i(15,"Password"),n(),t(16,"input",10),c("ngModelChange",function(o){return m(e.password,o)||(e.password=o),o}),n(),t(17,"label",11),i(18,"Confirm password"),n(),t(19,"input",12),c("ngModelChange",function(o){return m(e.confirmPassword,o)||(e.confirmPassword=o),o}),n(),_(20,D,2,1,"p",13)(21,L,2,1,"p",14),t(22,"button",15),i(23),n()(),t(24,"p",16),i(25," Already have an account? "),t(26,"a",17),i(27,"Log in"),n()()()()),d&2&&(s(13),g("ngModel",e.username),l("disabled",e.loading),s(3),g("ngModel",e.password),l("disabled",e.loading),s(3),g("ngModel",e.confirmPassword),l("disabled",e.loading),s(),f(e.error?20:-1),s(),f(e.success?21:-1),s(),l("disabled",e.loading),s(),P(" ",e.loading?"Creating account...":"Sign up"," "))},dependencies:[W,z,S,v,k,R,E,y],styles:[".register-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;background:linear-gradient(145deg,#0021a5,#001a85 40%,#0d1b4b);position:relative;overflow:hidden}.register-bg-pattern[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:radial-gradient(circle at 80% 20%,rgba(255,72,19,.1) 0%,transparent 50%);pointer-events:none}.register-container[_ngcontent-%COMP%]{width:100%;max-width:440px;padding:48px 40px;background:#fff;border-radius:16px;box-shadow:0 20px 60px #0003;border:1px solid rgba(255,255,255,.15);position:relative;z-index:1}.register-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:.5rem}.register-icon[_ngcontent-%COMP%]{font-size:2rem}.register-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.65rem;font-weight:700;color:#0021a5}.subtitle[_ngcontent-%COMP%]{color:#555;margin-bottom:1.75rem;font-size:.95rem;line-height:1.4}.register-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#333;margin-bottom:.4rem}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:1px solid #d0d0d0;border-radius:10px;margin-bottom:1rem;font-size:1rem;transition:border-color .2s,box-shadow .2s}.register-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0021a5;box-shadow:0 0 0 3px #0021a526}.register-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#b91c1c;font-size:.9rem;margin:0 0 .75rem;padding:10px 12px;background:#fef2f2;border-radius:8px;border-left:4px solid #dc2626}.register-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:#166534;font-size:.9rem;margin:0 0 .75rem;padding:10px 12px;background:#f0fdf4;border-radius:8px;border-left:4px solid #22c55e}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:14px;margin-top:.5rem;background:#ff4813;color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;transition:background .2s,transform .1s}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e63e0a}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.99)}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.8;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:1.5rem;text-align:center;font-size:.9rem;color:#555}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0021a5;font-weight:600}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return a})();export{G as RegisterComponent};
