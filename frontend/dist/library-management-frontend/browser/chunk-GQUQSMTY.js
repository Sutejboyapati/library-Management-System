import{a as w,b as B,e as L,j as D}from"./chunk-OOQXQIKY.js";import{a as T}from"./chunk-RTNBUYP5.js";import{$ as S,A as u,B as x,F as m,I as k,J as f,K as g,L as h,M as C,N as n,O as o,P as v,R as b,S as p,T as i,U as d,V as M,X as y,Y as O,Z as P,ra as E,y as a}from"./chunk-OW66QSYT.js";var z=e=>["/main/books",e],F=(e,r)=>r.id;function I(e,r){e&1&&(n(0,"div",7),v(1,"span",11),n(2,"p"),i(3,"Loading books..."),o()())}function A(e,r){if(e&1&&(n(0,"div",8)(1,"span",12),i(2,"\u26A0\uFE0F"),o(),n(3,"p"),i(4),o(),n(5,"p",13),i(6,"Start the backend with: "),n(7,"code"),i(8,"cd backend && go run ."),o()()()),e&2){let t=p();a(4),d(t.loadError)}}function N(e,r){e&1&&(n(0,"div",9)(1,"span",12),i(2,"\u{1F4ED}"),o(),n(3,"p"),i(4,"No books found."),o(),n(5,"p",13),i(6," Go to the "),n(7,"a",14),i(8,"login page"),o(),i(9,' and click "Load demo data" to add books, or try a different search. '),o()())}function W(e,r){if(e&1&&(n(0,"p",19),i(1),o()),e&2){let t=p().$implicit;a(),d(t.genre)}}function j(e,r){if(e&1&&(n(0,"a",15)(1,"span",16),i(2),o(),n(3,"h3",17),i(4),o(),n(5,"p",18),i(6),o(),m(7,W,2,1,"p",19),o()),e&2){let t=r.$implicit;k("routerLink",S(9,z,t.id)),a(),f("available",t.available_copies>0)("unavailable",t.available_copies===0),a(),M(" ",t.available_copies>0?t.available_copies+" available":"Out of stock"," "),a(2),d(t.title),a(2),d(t.author),a(),g(t.genre?7:-1)}}function G(e,r){if(e&1&&(n(0,"div",10),h(1,j,8,11,"a",15,F),o()),e&2){let t=p();a(),C(t.books)}}var H=(()=>{class e{constructor(t){this.bookService=t,this.books=[],this.loading=!1,this.search="",this.loadError=""}ngOnInit(){this.loadBooks()}loadBooks(){this.loading=!0,this.loadError="",this.bookService.getBooks(this.search||void 0).subscribe({next:t=>{this.books=Array.isArray(t)?t:[]},error:t=>{this.books=[],this.loadError=t?.status===0?"Cannot reach backend. Make sure it is running on port 3000.":"Failed to load books."},complete:()=>this.loading=!1})}onSearch(){this.loadBooks()}static{this.\u0275fac=function(s){return new(s||e)(u(T))}}static{this.\u0275cmp=x({type:e,selectors:[["app-book-list"]],decls:15,vars:2,consts:[[1,"book-list"],[1,"page-header"],[1,"page-title-wrap"],[1,"page-desc"],[1,"search-bar"],["type","text","placeholder","Search by title or author...",3,"ngModelChange","keyup.enter","ngModel"],["type","button",3,"click"],[1,"loading-state"],[1,"empty-state","error-state"],[1,"empty-state"],[1,"books-grid"],[1,"loading-spinner"],[1,"empty-icon"],[1,"empty-hint"],["routerLink","/login"],[1,"book-card",3,"routerLink"],[1,"book-badge"],[1,"book-title"],[1,"book-author"],[1,"book-genre"]],template:function(s,l){s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),i(4,"\u{1F4DA} Browse Catalog"),o(),n(5,"p",3),i(6,"Find your next great read"),o()(),n(7,"div",4)(8,"input",5),P("ngModelChange",function(c){return O(l.search,c)||(l.search=c),c}),b("keyup.enter",function(){return l.onSearch()}),o(),n(9,"button",6),b("click",function(){return l.onSearch()}),i(10,"Search"),o()()(),m(11,I,4,0,"div",7)(12,A,9,1,"div",8)(13,N,10,0,"div",9)(14,G,3,0,"div",10),o()),s&2&&(a(8),y("ngModel",l.search),a(3),g(l.loading?11:l.loadError?12:l.books.length===0?13:14))},dependencies:[E,D,w,B,L],styles:[".page-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:20px;margin-bottom:28px;padding-bottom:20px;border-bottom:1px solid #eee}.page-title-wrap[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#1a1a1a}.page-desc[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.9rem;color:#666}.search-bar[_ngcontent-%COMP%]{display:flex;gap:10px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #d0d0d0;border-radius:10px;min-width:240px;font-size:.95rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0021a5;box-shadow:0 0 0 3px #0021a51a}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background:#0021a5;color:#fff;border:none;border-radius:10px;font-weight:600;transition:background .2s}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#001a85}.books-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px}.book-card[_ngcontent-%COMP%]{position:relative;padding:24px 20px;background:#fff;border:1px solid #e9ecef;border-radius:12px;text-decoration:none;color:inherit;transition:all .2s ease;box-shadow:0 1px 3px #0000000a}.book-card[_ngcontent-%COMP%]:hover{border-color:#0021a5;box-shadow:0 8px 24px #0021a51f;transform:translateY(-2px)}.book-badge[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:.75rem;padding:4px 10px;border-radius:20px;font-weight:600}.book-badge.available[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.book-badge.unavailable[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.book-title[_ngcontent-%COMP%]{margin:0 0 .5rem;padding-right:80px;font-size:1.1rem;font-weight:600;line-height:1.4}.book-author[_ngcontent-%COMP%]{margin:0 0 .35rem;font-size:.9rem;color:#555}.book-genre[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#888}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:32px;height:32px;border:3px solid #e9ecef;border-top-color:#0021a5;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;display:block;margin-bottom:1rem}.empty-hint[_ngcontent-%COMP%]{font-size:.9rem;color:#999;margin-top:.5rem}"]})}}return e})();export{H as BookListComponent};
