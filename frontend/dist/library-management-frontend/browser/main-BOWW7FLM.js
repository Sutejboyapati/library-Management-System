import{a as r}from"./chunk-CDMB5YBM.js";import{B as u,P as l,ca as f,f as h,i as d,ja as C,ma as g,na as v,pa as A,q as t,qa as e,ta as k}from"./chunk-OW66QSYT.js";var b=()=>{let o=t(r),n=t(e);return o.isLoggedIn()?!0:(n.navigate(["/login"]),!1)};var m=()=>{let o=t(r),n=t(e);return o.isAdmin()?!0:(n.navigate(["/main/dashboard"]),!1)};var y=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-6JNIRXCG.js").then(o=>o.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-S45VQPTM.js").then(o=>o.RegisterComponent)},{path:"main",loadComponent:()=>import("./chunk-DFG6V4SQ.js").then(o=>o.MainLayoutComponent),canActivate:[b],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",loadComponent:()=>import("./chunk-KNBH77MN.js").then(o=>o.DashboardComponent)},{path:"books",loadComponent:()=>import("./chunk-GQUQSMTY.js").then(o=>o.BookListComponent)},{path:"books/:id",loadComponent:()=>import("./chunk-FOYPDCGG.js").then(o=>o.BookDetailComponent)},{path:"my-borrowings",loadComponent:()=>import("./chunk-K5MUW7FP.js").then(o=>o.MyBorrowingsComponent)},{path:"admin/books",loadComponent:()=>import("./chunk-4FHUP4GZ.js").then(o=>o.AdminBooksComponent),canActivate:[m]},{path:"admin/books/new",loadComponent:()=>import("./chunk-NWZQGF4E.js").then(o=>o.BookFormComponent),canActivate:[m]},{path:"admin/books/edit/:id",loadComponent:()=>import("./chunk-NWZQGF4E.js").then(o=>o.BookFormComponent),canActivate:[m]}]},{path:"**",redirectTo:"login"}];var x=(o,n)=>{let p=t(r),i=t(e),a=p.getToken(),c=o;return a&&(c=o.clone({setHeaders:{Authorization:`Bearer ${a}`}})),n(c).pipe(d(s=>(s.status===401&&(p.logout(),i.navigate(["/login"])),h(()=>s))))};var B={providers:[f({eventCoalescing:!0}),k(y),g(v([x]))]};var M=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=u({type:o,selectors:[["app-root"]],decls:1,vars:0,template:function(i,a){i&1&&l(0,"router-outlet")},dependencies:[A],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})}}return o})();C(M,B).catch(o=>console.error(o));
