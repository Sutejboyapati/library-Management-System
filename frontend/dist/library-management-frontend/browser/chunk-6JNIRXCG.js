import{a as S,b as E,c as L,d as D,e as z,f as T,j as N}from"./chunk-OOQXQIKY.js";import{a as k}from"./chunk-CDMB5YBM.js";import{A as g,B as M,F as c,I as m,K as u,N as n,O as t,P as w,R as p,S as f,T as o,U as b,V as P,X as h,Y as _,Z as C,la as y,qa as v,ra as O,ua as x,y as a}from"./chunk-OW66QSYT.js";function A(r,j){if(r&1&&(n(0,"p",12),o(1),t()),r&2){let i=f();a(),b(i.error)}}function I(r,j){if(r&1&&(n(0,"span",16),o(1),t()),r&2){let i=f();a(),b(i.seedMessage)}}var Y=(()=>{class r{constructor(i,s,e){this.auth=i,this.router=s,this.http=e,this.username="",this.password="",this.loading=!1,this.error="",this.seedMessage=""}loadDemoData(i=!1){this.seedMessage="";let s=i?`${x.apiUrl}/seed?force=1`:`${x.apiUrl}/seed`;this.http.get(s).subscribe({next:e=>{this.seedMessage=e.message||"Demo data loaded! Login: admin / admin123",e.booksAdded!=null&&(this.seedMessage+=` (${e.booksAdded} books)`)},error:()=>{this.seedMessage="Start the backend first (port 3000)."}})}onSubmit(){if(this.error="",!this.username.trim()||!this.password.trim()){this.error="Please enter username and password.";return}this.loading=!0,this.auth.login({username:this.username.trim(),password:this.password}).subscribe({next:()=>{this.auth.isAdmin()?this.router.navigate(["/main/admin/books"]):this.router.navigate(["/main/dashboard"])},error:i=>{this.loading=!1,i?.status===0||i?.message?.includes("Unknown Error")?this.error="Cannot reach the server. Please start the backend (e.g. run the Go server on port 3000) and try again.":this.error=i?.error?.message??i?.message??"Login failed."},complete:()=>this.loading=!1})}static{this.\u0275fac=function(s){return new(s||r)(g(k),g(v),g(y))}}static{this.\u0275cmp=M({type:r,selectors:[["app-login"]],decls:36,vars:8,consts:[[1,"login-page"],[1,"login-bg-pattern"],[1,"login-container"],[1,"login-left"],[1,"logo"],[1,"logo-icon"],[1,"tagline"],[1,"login-form",3,"ngSubmit"],["for","username"],["id","username","type","text","placeholder","Enter your username","name","username",3,"ngModelChange","ngModel","disabled"],["for","password"],["id","password","type","password","placeholder","Enter your password","name","password",3,"ngModelChange","ngModel","disabled"],[1,"error-message"],["type","submit",3,"disabled"],[1,"demo-hint"],["type","button",1,"btn-seed",3,"click"],[1,"seed-msg"],[1,"login-right"],[1,"signup-box"],[1,"signup-icon"],["routerLink","/register",1,"btn-signup"]],template:function(s,e){s&1&&(n(0,"div",0),w(1,"div",1),n(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),o(6,"\u{1F4DA}"),t(),o(7," Gator Shelfguide "),t(),n(8,"p",6),o(9,"Library Management System \u2014 Your gateway to knowledge"),t(),n(10,"form",7),p("ngSubmit",function(){return e.onSubmit()}),n(11,"label",8),o(12,"Username"),t(),n(13,"input",9),C("ngModelChange",function(d){return _(e.username,d)||(e.username=d),d}),t(),n(14,"label",10),o(15,"Password"),t(),n(16,"input",11),C("ngModelChange",function(d){return _(e.password,d)||(e.password=d),d}),t(),c(17,A,2,1,"p",12),n(18,"button",13),o(19),t(),n(20,"p",14)(21,"button",15),p("click",function(){return e.loadDemoData()}),o(22,"Load demo data"),t(),n(23,"button",15),p("click",function(){return e.loadDemoData(!0)}),o(24,"Force reload books"),t(),c(25,I,2,1,"span",16),t()()(),n(26,"div",17)(27,"div",18)(28,"div",19),o(29,"\u{1F4D6}"),t(),n(30,"h2"),o(31,"New here?"),t(),n(32,"p"),o(33,"Create an account and discover thousands of books."),t(),n(34,"a",20),o(35,"Create account"),t()()()()()),s&2&&(a(13),h("ngModel",e.username),m("disabled",e.loading),a(3),h("ngModel",e.password),m("disabled",e.loading),a(),u(e.error?17:-1),a(),m("disabled",e.loading),a(),P(" ",e.loading?"Logging in...":"Login"," "),a(6),u(e.seedMessage?25:-1))},dependencies:[N,T,S,E,L,z,D,O],styles:[".login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;background:linear-gradient(145deg,#0021a5,#001a85 40%,#0d1b4b);position:relative;overflow:hidden}.login-bg-pattern[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:radial-gradient(circle at 20% 80%,rgba(255,72,19,.08) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(255,255,255,.05) 0%,transparent 40%);pointer-events:none}.login-container[_ngcontent-%COMP%]{display:flex;max-width:920px;width:95%;min-height:500px;background:#fff;border-radius:16px;box-shadow:0 20px 60px #0003;overflow:hidden;border:1px solid rgba(255,255,255,.15);position:relative;z-index:1}.login-left[_ngcontent-%COMP%]{flex:1;padding:48px 44px;display:flex;flex-direction:column;justify-content:center}.logo[_ngcontent-%COMP%]{font-size:1.85rem;font-weight:700;color:#0021a5;margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem}.logo-icon[_ngcontent-%COMP%]{font-size:2rem;filter:drop-shadow(0 2px 4px rgba(0,33,165,.2))}.tagline[_ngcontent-%COMP%]{color:#555;margin-bottom:2rem;font-size:.95rem}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#333;margin-bottom:.4rem}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:1px solid #d0d0d0;border-radius:10px;margin-bottom:1rem;font-size:1rem;transition:border-color .2s,box-shadow .2s}.login-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0021a5;box-shadow:0 0 0 3px #0021a526}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#b91c1c;font-size:.9rem;margin:0 0 .75rem;padding:10px 12px;background:#fef2f2;border-radius:8px;border-left:4px solid #dc2626}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:14px;margin-top:.5rem;background:#ff4813;color:#fff;border:none;border-radius:10px;font-size:1rem;font-weight:600;transition:background .2s,transform .1s}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e63e0a}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.99)}.login-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.8;cursor:not-allowed}.login-right[_ngcontent-%COMP%]{width:300px;background:#0021a5;display:flex;align-items:center;justify-content:center;padding:36px}.signup-box[_ngcontent-%COMP%]{text-align:center;color:#fff}.signup-icon[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1rem;opacity:.95}.signup-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:700}.signup-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;opacity:.95;font-size:.95rem}.btn-signup[_ngcontent-%COMP%]{display:inline-block;padding:12px 28px;background:#ff4813;color:#fff;border-radius:10px;font-weight:600;transition:background .2s,transform .1s}.btn-signup[_ngcontent-%COMP%]:hover{background:#e63e0a;text-decoration:none;transform:scale(1.02)}.demo-hint[_ngcontent-%COMP%]{margin:1rem 0 0;font-size:.8rem;color:#888}.btn-seed[_ngcontent-%COMP%]{background:none;border:none;color:#0021a5;text-decoration:underline;cursor:pointer;padding:0;font-size:inherit}.btn-seed[_ngcontent-%COMP%]:hover{color:#001a85}.seed-msg[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#166534;font-size:.85rem}"]})}}return r})();export{Y as LoginComponent};
